<beanio xmlns="http://www.beanio.org/2012/03" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.beanio.org/2012/03 http://www.beanio.org/2012/03/mapping.xsd">
  
    <stream name="ticket" format="csv" resourceBundle="beanio/layoutMinimoMessages"  >  
        
        <parser>
           <property name="delimiter" value=";" />
        </parser>
        
        <typeHandler name="dateHandler" class="com.core.behavior.reader.DateHandler" />  
        <typeHandler name="doubleHandler" class="com.core.behavior.reader.DoubleHandler" />    
        <!-- record layout... -->  
        
              
        <group name="file" class="com.core.behavior.dto.FileParsedDTO">            
            <record  name="header" class="com.core.behavior.dto.HeaderDTO"  minOccurs="1" maxOccurs="1" order="1" >
                <field name="headerDataEmissao" trim="true" type="string"  literal="DATA_EMISSAO"/>
                <field name="headerDataVoo" trim="true" type="string"  literal="DATA_EMBARQUE"/>
                <field name="headerHoraVoo" trim="true" type="string"  literal="HORA_EMBARQUE"/>
                <field name="headerCiaBilhete" trim="true" type="string"  literal="CIA_BILHETE"/>
                <field name="headerTrechoTkt" trim="true" type="string"  literal="TRECHO"/>
                <field name="headerAtoOrigem" trim="true" type="string"  literal="ORIGEM"/>
                <field name="headerAtoDestino" trim="true" type="string"  literal="DESTINO"/>
                <field name="headerNumeroCupom" trim="true" type="string"  literal="CUPOM"/>
                <field name="headerBilhete" trim="true" type="string"  literal="BILHETE"/>
                <field name="headerTipoVenda" trim="true" type="string"  literal="TIPO"/>
                <field name="headerClasseCabine" trim="true" type="string"  literal="CABINE"/>
                <field name="headerCiaVoo" trim="true" type="string"  literal="CIA_VOO"/>
                <field name="headerValorBrl" trim="true" type="string"  literal="VALOR_BRL"/>
                <field name="headerClienteEmpresa" trim="true" type="string"  literal="EMPRESA"/>
                <field name="headerCnpjClienteEmpresa" trim="true" type="string"  literal="CNPJ"/>
                <field name="headerIataAgenciaEmissora" trim="true" type="string"  literal="IATA_AGENCIA"/>
                <field name="headerBaseVenda" trim="true" type="string"  literal="BASE_VENDA"/>
                <field name="headerQtdePax" trim="true" type="string"  literal="QTD_PAX"/>
                <field name="headerNumVoo" trim="true" type="string"  literal="NUM_VOO"/>
                <field name="headerAgenciaConsolidada" trim="true" type="string"  literal="CONSOLIDADA"/>
            </record>    
            
            <record name="ticket" class="com.core.behavior.model.Ticket" minOccurs="1" maxOccurs="unbounded" collection="list" order="2" >
                <field type="date" required="true" trim="true"  typeHandler="dateHandler" name="dataEmissao" />
                <field type="date" required="true" trim="true"  typeHandler="dateHandler" name="dataEmbarque" />
                <field type="string" required="true" trim="true" name="horaEmbarque" regex="([01]?[0-9]|2[0-3]):([0-5][0-9]):?([0-5][0-9])?" />
                <field type="string" required="true" trim="true" minLength="2" maxLength="2" name="ciaBilhete" />
                <field type="string" required="true" trim="true" minLength="7" regex="([A-Z]{3}[/]*)+" name="trecho" />
                <field type="string" required="true" trim="true" regex="([A-Z]){3}" name="origem" />
                <field type="string" required="true" trim="true" regex="([A-Z]){3}" name="destino" />
                <field type="long"   required="true" trim="true" name="cupom" regex="((^0*[1-9]$)|(^[1-9][0-9]$))" />
                <field type="string" required="true" trim="true" name="bilhete" regex="[A-Z0-9]{3,11}" />
                <field type="string" required="true" trim="true" name="tipo" regex="(I|N){1}"/>
                <field type="string" required="true" trim="true" name="cabine" regex="[A-Z]{1}" />
                <field type="string" required="true" trim="true" name="ciaVoo" regex="([A-Z]{1}[0-9]{1})|([A-Z]{1}[A-Z]{1})|([0-9]{1}[A-Z]{1})" />
                <field type="double" typeHandler="doubleHandler" trim="true" required="true" name="valorBrl"/>
                <field type="string" required="false" name="empresa" trim="true"/>
                <field type="string" required="false" name="cnpj" trim="true" regex="(^\d{2}.\d{3}.\d{3}/\d{4}-\d{2}$)"/>
                <field type="long" required="true" name="iataAgencia" trim="true" regex="[0-9]{7,8}" />
                <field type="string" required="true" name="baseVenda" trim="true" regex="[A-Z]{3}" />
                <field type="long" required="true" name="qtdPax" trim="true" regex="((^0*[1-9]$)|(^[1-9][0-9]$))"/>
                <field type="string" required="true" name="numVoo" regex="([0-9]{2,4})|([^A-Z]{2,4})|(^\\d[A-Z]{2,3})|([A-Z]{1,3}\\d$)|(^\\D[0-9]{2,3})|([0-9]{1,3}\\D$)|(\\d\\D){2,4}|(\\D\\d){2,4}" trim="true" />
                <field type="string" required="false" name="consolidada" trim="true" />
            </record>
        </group>
    </stream>  
</beanio>